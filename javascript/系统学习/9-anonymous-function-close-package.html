<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;  charset=utf-8" />
<title>匿名函数与闭包</title>
<body>
<script type="text/javascript">
/*********************************************
 * 匿名函数：没有名字的函数
 *********************************************/
//1.匿名函数赋值给变量
    var box = function(){
        return 'liangxifeng'; 
    }
    console.log(box()); //输出：liangxifeng 
//2.通过自我执行来执行匿名函数, (匿名函数)(); 
    (function(){
        console.log('123'); 
    })(); 
//3.把匿名函数自我执行的返回值赋值给变量
    var box = (function(){
            return 'hello'; 
            })(); 
    console.log(box); //输出:hello
//4.匿名函数自我执行传参
    (function(age){
        console.log(age); //输出：100
     })(100); 
//5.函数里放一个匿名函数
    function test()
    {
        return function(){ //闭包
            return 'zhangsan'; 
        }
    }
    console.log(test()()); //输出：zhangsan
/*********************************************
 * 闭包：在一个函数内部创建另一个函数，通过另一个函数访问这个函数的局部变量
 * 闭包的有点：同时也是缺点，就是可以把局部变量"驻留在内存"中，可以避免使用全局变量
 * （全局变量污染导致应用程序不可预测）
 * 所以推荐使用私有的，封装的局部变量
 * 由于闭包里作用域返回的局部变量资源不会立刻销毁回收，所以可能会
 * 占用更多内存，过度使用闭包会导致性能下降，建议在非常有必要情况才使用闭包
 *********************************************/
//1.通过匿名函数实现局部变量驻留内存中从而累加
    function box1(){
        var age = 100; 
        return function(){
            age++; 
            return age; 
        }
    }
    var a = box1(); //将box1中的age变量驻留在内存中
    console.log(a()); //101, 将box1中的age变量累加1
    console.log(a()); //102, 将box1中的age变量累加1
    console.log(a()); //103, ...
    a=null;  //不用就应该接触引用
</script>
</body>
</html>
